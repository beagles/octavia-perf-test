# Stress Test Profile
#
# High-load test for finding breaking points and
# connection limit thresholds.

test:
  name: "stress-test"
  duration: 600  # 10 minutes
  notes: "Stress test to identify performance limits"

locust:
  host: "http://192.168.200.50"  # VIP address
  users: 200
  spawn_rate: 20
  scenarios:
    - HighFrequencyUser
    - ConnectionReuseUser

collectors:
  haproxy_stats:
    enabled: true
    interval: 1  # More frequent during stress test
    # Configure when amphora is deployed:
    # amphora_ip: "192.168.100.100"
    # lb_id: "your-lb-id-here"
    # ssh_key: "/path/to/amphora_ssh_key"
    # ssh_username: "ubuntu"

  amphora_api:
    enabled: true
    interval: 2  # More frequent during stress test
    # Configure when amphora is deployed:
    # amphora_ip: "192.168.100.100"
    verify_ssl: false

  system_metrics:
    enabled: true
    interval: 2  # More frequent during stress test
    backends:
      - id: "backend-1"
        ip: "192.168.201.10"
        username: "vagrant"
      - id: "backend-2"
        ip: "192.168.201.11"
        username: "vagrant"
      - id: "backend-3"
        ip: "192.168.201.12"
        username: "vagrant"

analysis:
  bottleneck_detection: true

report:
  output_dir: "./reports"
  formats:
    - html
  export_json: true

storage:
  path: "./data/metrics.db"
