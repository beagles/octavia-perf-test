# Soak Test Profile
#
# Extended duration test for identifying memory leaks,
# connection leaks, and gradual degradation over time.

test:
  name: "soak-test"
  duration: 3600  # 1 hour
  notes: "Extended soak test for stability validation"

locust:
  host: "http://192.168.200.50"  # VIP address
  users: 30
  spawn_rate: 5
  scenarios:
    - BasicHTTPUser

collectors:
  haproxy_stats:
    enabled: true
    interval: 5  # Less frequent for long tests
    # Configure when amphora is deployed:
    # amphora_ip: "192.168.100.100"
    # lb_id: "your-lb-id-here"
    # ssh_key: "/path/to/amphora_ssh_key"

  amphora_api:
    enabled: true
    interval: 30  # Less frequent for long tests
    # Configure when amphora is deployed:
    # amphora_ip: "192.168.100.100"
    verify_ssl: false

  system_metrics:
    enabled: true
    interval: 30  # Less frequent for long tests
    backends:
      - id: "backend-1"
        ip: "192.168.201.10"
        username: "vagrant"
      - id: "backend-2"
        ip: "192.168.201.11"
        username: "vagrant"
      - id: "backend-3"
        ip: "192.168.201.12"
        username: "vagrant"

analysis:
  bottleneck_detection: true

report:
  output_dir: "./reports"
  formats:
    - html
  export_json: true

storage:
  path: "./data/metrics.db"
